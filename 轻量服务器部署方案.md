# 轻量应用服务器部署方案（推荐）

## 💰 成本：24元/月（首年），288元/年

---

## 一、为什么选择轻量应用服务器？

### 优势
- ✅ **价格便宜**：24元/月，比传统ECS便宜80%以上
- ✅ **配置够用**：2核2G，3-4Mbps带宽，完全满足需求
- ✅ **无需学生认证**：任何人都可以购买
- ✅ **开箱即用**：预装常用软件，部署更简单
- ✅ **流量充足**：每月1000GB流量，完全够用

### 适用场景
- 个人用户
- 小团队使用（5-10人）
- 正式项目部署
- 需要稳定运行

---

## 二、服务器选择对比

### 阿里云轻量应用服务器（推荐）

**配置**：
- CPU：2核
- 内存：2GB
- 带宽：3Mbps
- 存储：40GB SSD
- 流量：1000GB/月

**价格**：
- 首年：24元/月（288元/年）
- 续费：约60元/月（720元/年）

**购买地址**：https://www.aliyun.com/product/swas

**推荐地域**：
- 华东1（杭州）- 推荐
- 华东2（上海）
- 华北2（北京）
- 华南1（深圳）

---

### 腾讯云轻量应用服务器

**配置**：
- CPU：2核
- 内存：2GB
- 带宽：4Mbps（比阿里云稍高）
- 存储：40GB SSD
- 流量：1000GB/月

**价格**：
- 首年：24元/月（288元/年）
- 续费：约60元/月（720元/年）

**购买地址**：https://cloud.tencent.com/product/lighthouse

**推荐地域**：
- 上海
- 北京
- 广州

---

## 三、购买步骤（以阿里云为例）

### 步骤1：注册/登录账号

1. 访问：https://www.aliyun.com
2. 注册新账号或登录已有账号
3. 完成实名认证（必须）

### 步骤2：进入轻量应用服务器购买页面

1. 登录控制台
2. 点击"产品" → "轻量应用服务器"
3. 或直接访问：https://www.aliyun.com/product/swas
4. 点击"立即购买"

### 步骤3：选择配置

**推荐配置**：
- **地域**：选择离你最近的地域（如：华东1-杭州）
- **镜像**：Ubuntu 20.04 64位（推荐）
- **套餐**：2核2G，3Mbps，40GB SSD
- **时长**：建议选择1年（更划算）
- **数量**：1台

### 步骤4：设置服务器

1. **设置密码**：
   - 选择"自定义密码"
   - 设置root密码（记住这个密码！）
   - 密码要求：8-30位，包含大小写字母、数字、特殊字符

2. **设置服务器名称**：
   - 例如：PDF习题拆分工具

### 步骤5：确认订单

1. 查看配置和价格
2. 确认订单信息
3. 选择支付方式（支付宝/微信/银行卡）
4. 立即支付

### 步骤6：等待服务器创建

- 通常1-3分钟即可创建完成
- 在控制台查看服务器状态

---

## 四、获取服务器信息

### 1. 查看服务器IP

1. 登录阿里云控制台
2. 进入"轻量应用服务器"
3. 点击服务器实例
4. 在"概览"中查看"公网IP"

**示例**：`123.456.789.012`

### 2. 重置密码（如果需要）

1. 在服务器列表中，点击"更多" → "重置密码"
2. 设置新密码
3. 重启服务器使密码生效

---

## 五、连接服务器

### Windows用户

**方法1：使用PuTTY**

1. 下载：https://www.putty.org/
2. 打开PuTTY
3. 输入：
   - Host Name: `root@your-server-ip`
   - Port: `22`
   - Connection type: `SSH`
4. 点击"Open"
5. 输入密码

**方法2：使用Windows Terminal**

```bash
ssh root@your-server-ip
```

**方法3：使用VS Code**

1. 安装Remote-SSH扩展
2. 按F1，输入"Remote-SSH: Connect to Host"
3. 输入：`root@your-server-ip`
4. 输入密码

---

## 六、部署应用

### 方法1：使用一键部署脚本（推荐）

#### 步骤1：上传项目文件

**使用Git（推荐）**：
```bash
cd /opt
git clone your-repo-url pdf-to-ppt-manual
cd pdf-to-ppt-manual
```

**使用SCP（Windows PowerShell）**：
```powershell
scp -r pdf-to-ppt-manual root@your-server-ip:/opt/
```

**使用FTP工具**：
- 下载FileZilla
- 连接服务器：`sftp://your-server-ip`
- 上传项目文件夹到 `/opt/`

#### 步骤2：运行部署脚本

```bash
# 进入项目目录
cd /opt/pdf-to-ppt-manual

# 给脚本添加执行权限
chmod +x deploy.sh

# 运行部署脚本
./deploy.sh
```

**部署脚本会自动**：
- ✅ 更新系统
- ✅ 安装Python、Nginx等工具
- ✅ 安装项目依赖
- ✅ 配置systemd服务
- ✅ 配置Nginx
- ✅ 配置防火墙
- ✅ 启动服务

**预计时间**：5-10分钟

---

### 方法2：手动部署（参考详细文档）

如果一键部署失败，可以按照 `国内服务器部署指南.md` 手动部署。

---

## 七、访问应用

### 获取访问地址

部署完成后，访问地址为：
```
http://your-server-ip
```

**示例**：
```
http://123.456.789.012
```

### 测试访问

1. 打开浏览器
2. 访问上述地址
3. 应该能看到PDF上传界面

### 分享给用户

将访问地址分享给需要使用的用户：
```
PDF习题拆分PPT工具
访问地址：http://123.456.789.012
```

---

## 八、配置域名（可选）

### 如果使用域名访问

#### 步骤1：购买域名

1. **阿里云域名**：https://wanwang.aliyun.com
   - .com域名：约55元/年
   - .cn域名：约29元/年（推荐，更便宜）

2. **腾讯云域名**：https://dnspod.cloud.tencent.com
   - 价格类似

#### 步骤2：域名备案（必须）

**备案流程**：
1. 登录云服务商控制台
2. 进入"备案"页面
3. 填写备案信息
4. 上传材料（身份证等）
5. 等待审核（7-20个工作日）

**备案期间**：域名无法访问

#### 步骤3：配置DNS解析

1. 登录域名控制台
2. 添加A记录：
   - 记录类型：A
   - 主机记录：@（或www）
   - 记录值：服务器公网IP
   - TTL：600

#### 步骤4：配置Nginx

修改Nginx配置：
```bash
vim /etc/nginx/sites-available/pdf-to-ppt
```

将 `server_name` 改为你的域名：
```nginx
server_name your-domain.com;
```

重启Nginx：
```bash
systemctl restart nginx
```

#### 步骤5：访问域名

```
http://your-domain.com
```

---

## 九、配置HTTPS（推荐）

### 使用Let's Encrypt免费证书

```bash
# 安装Certbot
apt install certbot python3-certbot-nginx -y

# 获取证书（需要域名已解析）
certbot --nginx -d your-domain.com

# 自动续期测试
certbot renew --dry-run
```

配置完成后，访问：
```
https://your-domain.com
```

---

## 十、性能优化

### 1. 启用Gzip压缩

编辑Nginx配置：
```bash
vim /etc/nginx/sites-available/pdf-to-ppt
```

添加：
```nginx
gzip on;
gzip_vary on;
gzip_min_length 1024;
gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
```

重启Nginx：
```bash
systemctl restart nginx
```

### 2. 配置缓存

在Nginx配置中添加：
```nginx
location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {
    expires 30d;
    add_header Cache-Control "public, immutable";
}
```

### 3. 定期清理临时文件

创建清理脚本：
```bash
vim /opt/pdf-to-ppt-manual/cleanup.sh
```

内容：
```bash
#!/bin/bash
# 清理7天前的临时文件
find /opt/pdf-to-ppt-manual/temp -type f -mtime +7 -delete
find /opt/pdf-to-ppt-manual/output -type f -mtime +7 -delete
```

添加到crontab：
```bash
crontab -e
# 每天凌晨2点清理
0 2 * * * /opt/pdf-to-ppt-manual/cleanup.sh
```

---

## 十一、监控和维护

### 查看服务状态

```bash
# 查看应用服务状态
systemctl status pdf-to-ppt

# 查看Nginx状态
systemctl status nginx
```

### 查看日志

```bash
# 实时查看应用日志
journalctl -u pdf-to-ppt -f

# 查看Nginx访问日志
tail -f /var/log/nginx/pdf-to-ppt-access.log

# 查看Nginx错误日志
tail -f /var/log/nginx/pdf-to-ppt-error.log
```

### 重启服务

```bash
# 重启应用
systemctl restart pdf-to-ppt

# 重启Nginx
systemctl restart nginx

# 重启服务器
reboot
```

### 更新代码

```bash
cd /opt/pdf-to-ppt-manual
git pull  # 如果使用git
# 或重新上传文件
systemctl restart pdf-to-ppt
```

---

## 十二、常见问题

### Q1: 购买后无法连接？

**检查**：
1. 服务器是否已启动
2. IP地址是否正确
3. 密码是否正确
4. 防火墙是否开放22端口（轻量服务器默认已开放）

### Q2: 部署脚本失败？

**检查**：
1. 是否使用root用户
2. 网络连接是否正常
3. 查看错误信息

**解决**：
- 查看脚本输出的错误信息
- 按照 `国内服务器部署指南.md` 手动部署

### Q3: 无法访问网站？

**检查**：
```bash
# 检查服务状态
systemctl status pdf-to-ppt
systemctl status nginx

# 检查端口
netstat -tlnp | grep 5000
netstat -tlnp | grep 80

# 检查防火墙
ufw status
```

### Q4: 上传文件慢？

**原因**：
- 轻量服务器带宽3-4Mbps（约375-500KB/s）
- 上传50MB文件需要约1.5-2分钟

**解决**：
- 这是正常现象
- 可以压缩PDF后再上传
- 或升级到更高配置

### Q5: 续费价格？

**注意**：
- 首年：24元/月
- 续费：约60元/月
- 建议：首年购买1年，更划算

---

## 十三、成本总结

### 月度成本

**基础方案（IP访问）**：
- 服务器：24元/月（首年）
- 域名：0元
- SSL证书：0元
- 备案：0元

**总计：24元/月**

**完整方案（域名+HTTPS）**：
- 服务器：24元/月（首年）
- 域名：约2.5元/月（29元/年）
- SSL证书：0元
- 备案：0元

**总计：约26.5元/月**

### 年度成本

**基础方案**：288元/年  
**完整方案**：约318元/年

---

## 十四、推荐配置总结

### 服务器配置
- **CPU**：2核
- **内存**：2GB
- **带宽**：3-4Mbps
- **存储**：40GB SSD
- **流量**：1000GB/月

### 系统选择
- **Ubuntu 20.04 LTS**（推荐）
- 或 Ubuntu 22.04 LTS

### 访问方式
- **IP访问**：`http://your-server-ip`（最简单）
- **域名访问**：`http://your-domain.com`（需要备案）
- **HTTPS访问**：`https://your-domain.com`（需要域名+SSL）

---

## 十五、快速开始清单

- [ ] 注册云服务商账号
- [ ] 完成实名认证
- [ ] 购买轻量应用服务器（24元/月）
- [ ] 获取服务器IP和密码
- [ ] 连接服务器（SSH）
- [ ] 上传项目文件
- [ ] 运行部署脚本
- [ ] 测试访问
- [ ] （可选）购买域名
- [ ] （可选）配置域名解析
- [ ] （可选）配置HTTPS

---

## 需要帮助？

1. **详细文档**：查看 `国内服务器部署指南.md`
2. **部署脚本**：使用 `deploy.sh` 一键部署
3. **技术支持**：联系云服务商在线客服

---

## 推荐购买链接

- **阿里云轻量服务器**：https://www.aliyun.com/product/swas
- **腾讯云轻量服务器**：https://cloud.tencent.com/product/lighthouse

